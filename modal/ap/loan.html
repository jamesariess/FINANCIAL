<div class="modal-overlay fixed inset-0 hidden items-center justify-center bg-black/50 z-50" id="modalOverlay">
  <div class="bg-white p-6 rounded-2xl shadow-xl w-2/4 max-w-5xl" id="collectionform">
    <legend class="text-xl font-semibold mb-4">Add Loan</legend>
    <form action="" method="post" class="space-y-6">
      <input type="hidden" id="RequestId" name="RequestId">

     
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="form-group">
          <label for="loanTitle" class="block text-sm font-medium">Loan Title</label>
          <input type="text" id="loanTitle" name="loanTitle" class="w-full border rounded-lg p-2" required>
        </div>

        <div class="form-group">
          <label for="vendorName" class="block text-sm font-medium">Vendor Name</label>
          <select id="vendorName" name="vendorId" class="w-full border rounded-lg p-2" required>
            <option value="">--SELECT VENDOR--</option>
            <?php
              try {
                $sql = "SELECT vendor_id, vendor_name FROM vendor WHERE Status = 'Active' AND Archive='NO' ORDER BY vendor_name ASC";
                $stmt = $pdo->query($sql);
                $vendors = $stmt->fetchAll(PDO::FETCH_ASSOC);
                foreach ($vendors as $vendor) {
                  echo "<option value='" . htmlspecialchars($vendor['vendor_id'], ENT_QUOTES) . "'>" . htmlspecialchars($vendor['vendor_name'], ENT_QUOTES) . "</option>";
                }
              } catch (PDOException $e) {
                echo "<option value=''>Error loading vendors</option>";
              }
            ?>
          </select>
        </div>

        <div class="form-group">
          <label for="loanAmount" class="block text-sm font-medium">Loan Amount</label>
          <input type="number" id="loanAmount" name="loanAmount" class="w-full border rounded-lg p-2" required>
        </div>
      </div>


     
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div class="form-group">
          <label for="interestRate" class="block text-sm font-medium">Interest Rate</label>
          <input type="number" id="interestRate" name="interestRate" step="0.01" class="w-full border rounded-lg p-2" required>
        </div>
          <div class="form-group">
          <label for="PenaltyRate" class="block text-sm font-medium">Penalty Interest Rate</label>
          <input type="number" id="PenaltyRate" name="PenaltyRate" step="0.01" class="w-full border rounded-lg p-2" required>
        </div>

        <div class="form-group">
          <label for="Disbursement" class="block text-sm font-medium">Loan Disbursement Date</label>
          <input type="date" id="Disbursement" name="Disbursement" class="w-full border rounded-lg p-2" required>
        </div>

      <div class="form-group">
        <label for="day" class="block  text-sm font-medium">Payment Due Day</label>
        <input type="number" id="day" name="day" class="w-full border rounded-lg p-2" required>
      </div>

      
      </div>  
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="form-group">
          <label for="Installment" class="block text-sm font-medium">Installment</label>
          <input type="number" id="Installment" name="Installment" class="w-full border rounded-lg p-2" required>
        </div>
            <div class="form-group">
        <label for="Collateral" class="block text-sm font-medium">Collateral</label>
        <input type="text" id="Collateral" name="Collateral" class="w-full border rounded-lg p-2">
      </div>
           <div class="form-group">
        <label for="Penalty" class="block text-sm font-medium">Penalty Details </label>
        <input type="text" id="Penalty" name="Penalty" class="w-full border rounded-lg p-2">
      </div>
      
       </div>
        <div class="form-group">
        <label for="Received" class="block text-sm font-medium">Received Via</label>
        <Select id="Received" name="Received" class="w-full border rounded-lg p-2">
            <option value="">--Select Method</option>
            <option value="Cash">Cash</option>
            <option value="Check">Check</option>
            <option value="Bank Transfer">Bank Transfer</option>
        </Select>

      </div>
      <div class="form-group">
        <label for="Purpose" class="block text-sm font-medium">Purpose</label>
        <input type="text" id="Purpose" name="Purpose" class="w-full border rounded-lg p-2">
      </div>
     
      <div class="flex justify-end space-x-4">
        <button type="button" id="cancelBtn" class="px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400">Cancel</button>
        <button type="submit" name="create" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">Create Loan</button>
      </div>
    </form>
  </div>
</div>

    <script>
    const toggleFormBtn = document.getElementById('toggleFormBtn');
    const modalOverlay = document.getElementById('modalOverlay');
    const cancelBtn = document.getElementById("cancelBtn");

    toggleFormBtn.addEventListener('click',()=>{
        modalOverlay.style.display='flex';
    });
    cancelBtn.addEventListener('click',()=>{
        modalOverlay.style.display="none";

    });

    modalOverlay.addEventListener('click',(e)=>{
        if(e.target === modalOverlay){
              modalOverlay.style.display='none';
        }
    })

</script>