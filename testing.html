<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Disbursement Management — Core Modules (Freight)</title>
  <style>
    :root{--bg:#f6f8fb;--card:#fff;--accent:#0b66ff;--muted:#6b7280;--glass:rgba(11,102,255,0.06)}
    body{font-family:Inter,Segoe UI,Roboto,system-ui,Arial;margin:0;background:var(--bg);color:#111}
    header{background:linear-gradient(90deg,var(--accent),#4ea8ff);color:#fff;padding:18px 28px;display:flex;align-items:center;gap:16px}
    header h1{font-size:18px;margin:0}
    .container{display:grid;grid-template-columns:300px 1fr;gap:20px;padding:20px;max-width:1200px;margin:20px auto}
    .sidebar{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(16,24,40,0.06)}
    .module{padding:10px;border-radius:8px;margin-bottom:8px;border:1px solid #eef2ff;display:flex;justify-content:space-between;align-items:center}
    .module h3{margin:0;font-size:14px}
    .module p{margin:4px 0 0 0;font-size:12px;color:var(--muted)}

    main{min-height:400px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(16,24,40,0.04);margin-bottom:16px}
    .card h2{margin:0 0 8px 0;font-size:16px}
    .steps{display:flex;gap:8px;flex-wrap:wrap}
    .step{background:var(--glass);padding:12px;border-radius:8px;min-width:170px}
    .step h4{margin:0 0 6px 0;font-size:13px}
    .table{width:100%;border-collapse:collapse}
    table th, table td{padding:8px;border-bottom:1px solid #f1f5f9;text-align:left;font-size:13px}
    .actions{display:flex;gap:8px}
    .btn{background:var(--accent);color:#fff;padding:8px 10px;border-radius:8px;border:none;cursor:pointer}
    .ghost{background:transparent;border:1px solid #e6eefc;color:var(--accent)}
    .flow{display:flex;gap:8px;align-items:center;margin-top:12px}
    .flow svg{background:#fff;border-radius:8px;padding:8px}

    pre{background:#0f1724;color:#e6f0ff;padding:12px;border-radius:8px;overflow:auto}
    @media (max-width:900px){.container{grid-template-columns:1fr;padding:12px}}
  </style>
</head>
<body>
  <header>
    <svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="6" fill="white"/><path d="M7 13l3 3 7-9" stroke="#0b66ff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
    <div>
      <h1>Disbursement Management — Core Modules (Freight)</h1>
      <div style="font-size:13px;color:rgba(255,255,255,0.85)">Interactive HTML mockup with processes, ERD and sample data</div>
    </div>
  </header>

  <div class="container">
    <aside class="sidebar card">
      <h3 style="margin-top:0">Core Modules</h3>
      <div class="module">
        <div>
          <h3>Payment Processing</h3>
          <p>Execute payments & record txn IDs</p>
        </div>
        <div class="actions"><button class="btn" onclick="showModule('payment')">Open</button></div>
      </div>

      <div class="module">
        <div>
          <h3>Vendor & Payee Management</h3>
          <p>Maintain vendor banking and terms</p>
        </div>
        <div class="actions"><button class="btn ghost" onclick="showModule('vendor')">Open</button></div>
      </div>

      <div class="module">
        <div>
          <h3>Invoice Verification</h3>
          <p>Match invoice to freight job</p>
        </div>
        <div class="actions"><button class="btn" onclick="showModule('invoice')">Open</button></div>
      </div>

      <div class="module">
        <div>
          <h3>Expense Authorization</h3>
          <p>Approval workflows</p>
        </div>
        <div class="actions"><button class="btn ghost" onclick="showModule('auth')">Open</button></div>
      </div>

      <div class="module">
        <div>
          <h3>Payment Scheduling</h3>
          <p>Set due dates & batching</p>
        </div>
        <div class="actions"><button class="btn" onclick="showModule('schedule')">Open</button></div>
      </div>

      <div class="module">
        <div>
          <h3>Disbursement Recording</h3>
          <p>Ledger entries & docs</p>
        </div>
        <div class="actions"><button class="btn ghost" onclick="showModule('record')">Open</button></div>
      </div>

      <div class="module">
        <div>
          <h3>Bank / Payment Integration</h3>
          <p>Connect to banks / gateways</p>
        </div>
        <div class="actions"><button class="btn" onclick="showModule('bank')">Open</button></div>
      </div>

      <small style="color:var(--muted);display:block;margin-top:12px">Click a module to view process steps & sample data.</small>
    </aside>

    <main>
      <section id="detail" class="card">
        <h2>Module: <span id="moduleTitle">Payment Processing</span></h2>
        <div id="moduleDesc">Select a module from the left to view step-by-step processes and example data.</div>

        <div id="moduleSteps" style="margin-top:12px" class="steps">
          <!-- populated by JS -->
        </div>

        <div id="moduleFlow" class="flow"></div>
      </section>

      <section class="card" id="erdCard">
        <h2>ERD (Simplified)</h2>
        <svg width="100%" height="260" viewBox="0 0 1000 260" xmlns="http://www.w3.org/2000/svg">
          <!-- Vendor box -->
          <rect x="20" y="20" width="220" height="120" rx="8" fill="#fff" stroke="#e6eefc"/>
          <text x="30" y="45" font-size="14" font-weight="600">Vendor</text>
          <text x="30" y="68" font-size="12" fill="#6b7280">VendorID (PK)</text>
          <text x="30" y="86" font-size="12" fill="#6b7280">VendorName</text>
          <text x="30" y="104" font-size="12" fill="#6b7280">BankAccountNo</text>

          <!-- Freight Job box -->
          <rect x="380" y="20" width="260" height="120" rx="8" fill="#fff" stroke="#e6eefc"/>
          <text x="390" y="45" font-size="14" font-weight="600">FreightJob</text>
          <text x="390" y="68" font-size="12" fill="#6b7280">FreightJobID (PK)</text>
          <text x="390" y="86" font-size="12" fill="#6b7280">JobNumber</text>
          <text x="390" y="104" font-size="12" fill="#6b7280">Origin / Destination</text>

          <!-- Invoice box -->
          <rect x="680" y="20" width="260" height="120" rx="8" fill="#fff" stroke="#e6eefc"/>
          <text x="690" y="45" font-size="14" font-weight="600">Invoice</text>
          <text x="690" y="68" font-size="12" fill="#6b7280">InvoiceID (PK)</text>
          <text x="690" y="86" font-size="12" fill="#6b7280">FreightJobID (FK)</text>
          <text x="690" y="104" font-size="12" fill="#6b7280">Amount, Status</text>

          <!-- Disbursement box -->
          <rect x="220" y="150" width="360" height="90" rx="8" fill="#fff" stroke="#e6eefc"/>
          <text x="230" y="175" font-size="14" font-weight="600">Disbursement</text>
          <text x="230" y="195" font-size="12" fill="#6b7280">DisbursementID (PK)</text>
          <text x="230" y="213" font-size="12" fill="#6b7280">VendorID (FK), FreightJobID (FK), Amount, Method, Status</text>

          <!-- Lines -->
          <line x1="240" y1="80" x2="380" y2="80" stroke="#c7ddff" stroke-width="2" stroke-dasharray="4 4"/>
          <text x="320" y="72" font-size="11" fill="#0b66ff">1..* (Vendor -> Disbursement)</text>

          <line x1="540" y1="80" x2="680" y2="80" stroke="#c7ddff" stroke-width="2" stroke-dasharray="4 4"/>
          <text x="610" y="72" font-size="11" fill="#0b66ff">1..* (FreightJob -> Invoice)</text>

          <line x1="520" y1="150" x2="520" y2="120" stroke="#c7ddff" stroke-width="2"/>
          <text x="530" y="135" font-size="11" fill="#0b66ff">links Disbursement to Job/Invoice</text>
        </svg>
      </section>

      <section class="card" id="sampleData">
        <h2>Sample Data (Freight)</h2>
        <h3 style="margin-bottom:8px">Vendors</h3>
        <table class="table" id="vendorTable">
          <thead><tr><th>VendorID</th><th>VendorName</th><th>Contact</th><th>BankAccount</th><th>PaymentTerms</th></tr></thead>
          <tbody>
            <tr><td>V001</td><td>OceanBlue Shipping</td><td>+63-912-111-2222</td><td>123-456-789</td><td>Net 30</td></tr>
            <tr><td>V002</td><td>Manila Truck Lines</td><td>+63-915-222-3333</td><td>987-654-321</td><td>Net 15</td></tr>
          </tbody>
        </table>

        <h3 style="margin-top:12px">Freight Jobs</h3>
        <table class="table">
          <thead><tr><th>FreightJobID</th><th>JobNumber</th><th>ClientID</th><th>Origin</th><th>Destination</th></tr></thead>
          <tbody>
            <tr><td>FJ001</td><td>J-2025-01</td><td>C001</td><td>Manila Port</td><td>Cebu Port</td></tr>
            <tr><td>FJ002</td><td>J-2025-02</td><td>C002</td><td>Davao Port</td><td>Manila Port</td></tr>
          </tbody>
        </table>

        <h3 style="margin-top:12px">Invoices</h3>
        <table class="table">
          <thead><tr><th>InvoiceID</th><th>FreightJobID</th><th>VendorID</th><th>InvoiceDate</th><th>Amount</th><th>Status</th></tr></thead>
          <tbody>
            <tr><td>INV001</td><td>FJ001</td><td>V001</td><td>2025-08-01</td><td>50000</td><td>Approved</td></tr>
            <tr><td>INV002</td><td>FJ002</td><td>V002</td><td>2025-08-03</td><td>25000</td><td>Pending</td></tr>
          </tbody>
        </table>

        <h3 style="margin-top:12px">Disbursements</h3>
        <table class="table">
          <thead><tr><th>DisbursementID</th><th>VendorID</th><th>FreightJobID</th><th>Date</th><th>Amount</th><th>Method</th><th>Status</th></tr></thead>
          <tbody>
            <tr><td>DIS001</td><td>V001</td><td>FJ001</td><td>2025-08-05</td><td>50000</td><td>Bank</td><td>Completed</td></tr>
            <tr><td>DIS002</td><td>V002</td><td>FJ002</td><td>2025-08-10</td><td>25000</td><td>Cash</td><td>Scheduled</td></tr>
          </tbody>
        </table>

      </section>

      <section class="card">
        <h2>Quick actions</h2>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" onclick="generateCSV()">Download Sample Data (CSV)</button>
          <button class="btn ghost" onclick="copyJSON()">Copy Sample Data (JSON)</button>
          <button class="btn" onclick="showAllSteps()">Show Full Process Flow</button>
        </div>
      </section>

    </main>
  </div>

  <script>
    const modules = {
      payment:{title:'Payment Processing', desc:'Execute payments using selected payment methods and record confirmations / transaction IDs.', steps:[
        'Receive approved payment request',
        'Select payment method (bank/cheque/cash)',
        'Validate payee bank details',
        'Execute payment via bank API or manual',
        'Receive confirmation / txn ID',
        'Update disbursement record as Paid'
      ], flow:'[Approved Request] → [Select Method] → [Validate Details] → [Execute Payment] → [Confirmation] → [Record]'},

      vendor:{title:'Vendor & Payee Management', desc:'Add and maintain vendor profiles, bank accounts, and payment terms.', steps:[
        'Add vendor with unique VendorID',
        'Store contact & bank details',
        'Define payment terms',
        'Set status (active/inactive)',
        'Update records when needed'
      ], flow:'[Add Vendor] → [Store Details] → [Set Terms] → [Active/Inactive]'},

      invoice:{title:'Invoice Verification', desc:'Match vendor invoices against freight jobs and contracts to detect mismatches or duplicates.', steps:[
        'Receive invoice from vendor',
        'Match with FreightJobID',
        'Verify amounts and services',
        'Check for duplicates',
        'Mark Verified or Flag for Correction',
        'Send to Authorization'
      ], flow:'[Receive Invoice] → [Match Job] → [Verify Amounts] → [Duplicate Check] → [Verified / Flag]'},

      auth:{title:'Expense Authorization', desc:'Approval routing and budget checks before payment.', steps:[
        'Receive verified invoice',
        'Check budget & policies',
        'Route to approver(s)',
        'Approver approves or rejects',
        'On approve → Payment Scheduling'
      ], flow:'[Verified Invoice] → [Budget Check] → [Route to Approver] → [Approve/Reject] → [Next]'},

      schedule:{title:'Payment Scheduling', desc:'Set payment due dates, batch payments and trigger payments when due.', steps:[
        'Receive approved disbursement',
        'Read vendor payment terms',
        'Calculate due date (InvoiceDate + Terms)',
        'Batch payments for same vendor if needed',
        'Trigger Payment Processing on due date'
      ], flow:'[Approved Disbursement] → [Calculate Due Date] → [Batching] → [Trigger Payment]'},

      record:{title:'Disbursement Recording', desc:'Maintain ledger entries, supporting documents and audit trail for every payment.', steps:[
        'Record payment details (date, amount, method)',
        'Attach supporting docs (invoice, proof)',
        'Link to FreightJob and Invoice',
        'Post to general ledger',
        'Make available for audit/reports'
      ], flow:'[Payment Exec] → [Record Entry] → [Attach Docs] → [Post to Ledger]'},

      bank:{title:'Bank / Payment Integration', desc:'Secure connections with banks and gateways plus status handling.', steps:[
        'Configure bank API / gateway',
        'Map vendor bank details to API format',
        'Send payment instruction securely',
        'Receive payment status updates',
        'Log txn references'
      ], flow:'[Configure API] → [Map Data] → [Send Instruction] → [Receive Status] → [Log]'}
    }

    function showModule(key){
      const m = modules[key];
      document.getElementById('moduleTitle').innerText = m.title;
      document.getElementById('moduleDesc').innerText = m.desc;
      const stepsEl = document.getElementById('moduleSteps'); stepsEl.innerHTML = '';
      m.steps.forEach((s,i)=>{
        const div = document.createElement('div'); div.className='step'; div.innerHTML = `<h4>${i+1}. ${s.split(' ')[0]}${i===0?'':' '}</h4><div style="font-size:13px;color:var(--muted)">${s}</div>`;
        stepsEl.appendChild(div);
      })
      document.getElementById('moduleFlow').innerHTML = `<pre>${m.flow}</pre>`;
      window.scrollTo({top:80,behavior:'smooth'});
    }

    function showAllSteps(){
      document.getElementById('moduleTitle').innerText = 'Full Disbursement Process';
      document.getElementById('moduleDesc').innerText = 'Combined flow from invoice receipt to payment recording.';
      const stepsEl = document.getElementById('moduleSteps'); stepsEl.innerHTML = '';
      const all = ['Invoice Verification','Expense Authorization','Payment Scheduling','Payment Processing','Disbursement Recording','Bank / Payment Integration'];
      all.forEach((s,i)=>{
        const div = document.createElement('div'); div.className='step'; div.innerHTML = `<h4>${i+1}. ${s}</h4><div style="font-size:13px;color:var(--muted)">Click modules at left for details.</div>`;
        stepsEl.appendChild(div);
      })
      document.getElementById('moduleFlow').innerHTML = `<pre>[Receive Invoice] → [Verify] → [Authorize] → [Schedule] → [Execute Payment] → [Record/Log]</pre>`;
    }

    function generateCSV(){
      const csvParts = [];
      // vendors
      csvParts.push('Vendors\nVendorID,VendorName,Contact,BankAccount,PaymentTerms');
      csvParts.push('V001,OceanBlue Shipping,+63-912-111-2222,123-456-789,Net 30');
      csvParts.push('V002,Manila Truck Lines,+63-915-222-3333,987-654-321,Net 15');
      // invoices
      csvParts.push('\nInvoices\nInvoiceID,FreightJobID,VendorID,InvoiceDate,Amount,Status');
      csvParts.push('INV001,FJ001,V001,2025-08-01,50000,Approved');
      csvParts.push('INV002,FJ002,V002,2025-08-03,25000,Pending');
      // disbursements
      csvParts.push('\nDisbursements\nDisbursementID,VendorID,FreightJobID,Date,Amount,Method,Status');
      csvParts.push('DIS001,V001,FJ001,2025-08-05,50000,Bank,Completed');
      csvParts.push('DIS002,V002,FJ002,2025-08-10,25000,Cash,Scheduled');

      const csv = csvParts.join('\n');
      const blob = new Blob([csv],{type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'disbursement_sample_data.csv'; a.click(); URL.revokeObjectURL(url);
    }

    function copyJSON(){
      const data = {
        vendors:[{VendorID:'V001',VendorName:'OceanBlue Shipping',Contact:'+63-912-111-2222',BankAccount:'123-456-789',PaymentTerms:'Net 30'},{VendorID:'V002',VendorName:'Manila Truck Lines',Contact:'+63-915-222-3333',BankAccount:'987-654-321',PaymentTerms:'Net 15'}],
        invoices:[{InvoiceID:'INV001',FreightJobID:'FJ001',VendorID:'V001',InvoiceDate:'2025-08-01',Amount:50000,Status:'Approved'},{InvoiceID:'INV002',FreightJobID:'FJ002',VendorID:'V002',InvoiceDate:'2025-08-03',Amount:25000,Status:'Pending'}],
        disbursements:[{DisbursementID:'DIS001',VendorID:'V001',FreightJobID:'FJ001',Date:'2025-08-05',Amount:50000,Method:'Bank',Status:'Completed'},{DisbursementID:'DIS002',VendorID:'V002',FreightJobID:'FJ002',Date:'2025-08-10',Amount:25000,Method:'Cash',Status:'Scheduled'}]
      }
      navigator.clipboard.writeText(JSON.stringify(data,null,2)).then(()=>alert('Sample data copied to clipboard (JSON).'))
    }

    // initialize
    showModule('payment');
  </script>
</body>
</html>
