<div class="table-section" id="invoiceTableSection">
    <h3>Custumer Report</h3>
    <table id="employeesTable">
        <thead>
            <tr>
    <th>custumer ID</th>
    <th>custumer Name</th>
    <th>Contact Person</th>
    <th>Contact Number</th>
    <th>Email</th>
    <th>Address</th>
    <th>Terms</th>
    <th>Status</th>
    <th>Action</th>
            </tr>
        </thead>
        <tbody id="employeesTableBody">
            <?php if(!empty($custumerReports)):
            foreach($custumerReports as $row): ?>
            <tr>
    <td><?php echo htmlspecialchars($row['customer_id']);?></td>
    <td><?php echo htmlspecialchars($row['name']);?></td>
    <td><?php echo htmlspecialchars($row['contact_person']);?></td>
    <td><?php echo htmlspecialchars($row['phone']);?></td>
    <td><?php echo htmlspecialchars($row['email']);?></td>
    <td><?php echo htmlspecialchars($row['address_line']);?></td>
    <td><?php echo htmlspecialchars($row['payment_terms']);?></td>
    <td><?php echo htmlspecialchars($row['is_active']);?></td>
     <td>
        <a href=""
        onclick="openViewModal(
            '<?php echo $row['customer_id'];?>',
            '<?php echo htmlspecialchars($row['name'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['contact_person'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['phone'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['email'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['address_line'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['payment_terms'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['is_active'],ENT_QUOTES);?>');
        return false;"> üëÅÔ∏è View</a>
        <a href=""
        onclick="openUpdateModal(
            '<?php echo $row['customer_id'];?>',
            '<?php echo htmlspecialchars($row['name'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['contact_person'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['phone'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['email'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['address_line'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['payment_terms'],ENT_QUOTES);?>',
            '<?php echo htmlspecialchars($row['is_active'],ENT_QUOTES);?>');  
        return false;"> ‚úèÔ∏è Update</a>
        <a href=""
        onclick="openArchiveModal('<?php echo $row['customer_id']?>'); return false;"> üóÑÔ∏è Archive</a>
     </td>
         
            </tr>
            <?php endforeach; else:?>
            <tr><Td colspan="8" class="text-center p-4">NO Records Found.</Td></tr>
            <?php endif;?>
        </tbody>
    </table>
</div>

<div id="viewModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center" onclick="outsideClick(event, 'viewModal')">
    <div class="bg-white p-6 rounded-lg shadow-lg w-1/3 relative" onclick="event.stopPropagation()">
        <h2 class="text-lg font-bold mb-4">View</h2>
        <div class="space-y-2">
            <p><strong>Custumer ID:</strong> <span id="viewAdjustID"></span></p>
            <p><strong>Custumer Name:</strong> <span id="viewBudgetID"></span></p>
            <p><strong>Contact Person:</strong> <span id="viewAdjustedBy"></span></p>
            <p><strong>Contact Number:</strong> <span id="viewAdjustmentDate"></span></p>
            <p><strong>Email:</strong> <span id="viewReason"></span></p>
            <p><strong>Address:</strong> <span id="viewNewAmount"></span></p>
            <p><strong>Terms:</strong> <span id="viewStatus"></span></p>
        </div>
      
    </div>
</div>

<!-- Update Modal -->
<div id="updateModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center" onclick="outsideClick(event, 'updateModal')">
  <div class="bg-white p-6 rounded-lg shadow-lg w-1/3 relative" onclick="event.stopPropagation()">
    <button class="absolute top-2 right-2 text-gray-500 hover:text-black" onclick="closeModal('updateModal')">&times;</button>
    <h2 class="text-lg font-bold mb-4">Update Custumer</h2>
    <form method="post">
        <input type="hidden" name="update_custumerID" id="updateAdjustID">
        <div class="mb-4">
          <label for="updateCustumerName" class="block text-sm font-medium text-gray-700">Custumer Name</label>
          <input type="text" name="update_custumerName" id="updateCustumerName" class="mt-1 p-2 border border-gray-300 rounded w-full" required>
        </div>
        <div class="mb-4">
          <label for="updateContactPerson" class="block text-sm font-medium text-gray-700">Contact Person</label>
          <input type="text" name="update_contactPerson" id="updateContactPerson" class="mt-1 p-2 border border-gray-300 rounded w-full" required>
        </div>
        <div class="mb-4">
          <label for="updateContactNumber" class="block text-sm font-medium text-gray-700">Contact Number</label>
          <input type="text" name="update_contactNumber" id="updateContactNumber" class="mt-1 p-2 border border-gray-300 rounded w-full" required>
        </div>
        <div class="mb-4">
          <label for="updateEmail" class="block text-sm font-medium text-gray-700">Email</label>
          <input type="email" name="update_email" id="updateEmail" class="mt-1 p-2 border border-gray-300 rounded w-full" required>
        </div>
        <div class="mb-4">
          <label for="updateAddress" class="block text-sm font-medium text-gray-700">Address</label>
          <input type="text" name="update_address" id="updateAddress" class="mt-1 p-2 border border-gray-300 rounded w-full" required>
        </div>
        <div class="mb-4">
          <label for="updatePaymentTerms" class="block text-sm font-medium text-gray-700">Payment Terms</label>
            <input type="text" name="update_paymentTerms" id="updatePaymentTerms" class="mt-1 p-2 border border-gray-300 rounded w-full" required>
        </div>
        <div class="mb-4">
          <label for="updateStatus" class="block text-sm font-medium text-gray-700">Status</label>
          <select name="update_status" id="updateStatus" class="mt-1 p-2 border border-gray-300 rounded w-full" required>
            <option value="Active">Active</option>
            <option value="Inactive">Inactive</option>
          </select>
        </div>



      <div class="flex justify-end space-x-3 mt-4">
        <button type="button" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400" onclick="closeModal('updateModal')">Cancel</button>
        <button type="submit" name="update" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Update</button>
      </div>
    </form>
  </div>
</div>



<div id="archiveModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center" onclick="outsideClick(event, 'archiveModal')">
  <div class="bg-white p-6 rounded-lg shadow-lg w-1/3 relative" onclick="event.stopPropagation()">
    <button class="absolute top-2 right-2 text-gray-500 hover:text-black" onclick="closeModal('archiveModal')">&times;</button>
   
        <h2 class="text-lg font-bold mb-4">Archive Custumer</h2>
        <p>Are you sure you want to archive this custumer?</p>
        <form method="post">
          
          <div class="flex justify-end space-x-3">
            <input type="hidden" name="archive_custumerID" id="archiveAdjustID">
            <button type="submit" name="archive" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Archive</button>
            <button type="button" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400" onclick="closeModal('archiveModal')">Cancel</button>
          </div>
        </form>
  </div>
</div>

<script>
function openViewModal(custumerID, custumerName, contactPerson, contactNumber, email, address, paymentTerms, status) {
    document.getElementById('viewAdjustID').innerText = custumerID;
    document.getElementById('viewBudgetID').innerText = custumerName;
    document.getElementById('viewAdjustedBy').innerText = contactPerson;
    document.getElementById('viewAdjustmentDate').innerText = contactNumber;
    document.getElementById('viewReason').innerText = email;
    document.getElementById('viewNewAmount').innerText = address;
    document.getElementById('viewStatus').innerText = paymentTerms;
    document.getElementById('viewStatus').innerText = status;
    document.getElementById('viewModal').classList.remove('hidden');
}
function openUpdateModal(custumerID, custumerName, contactPerson, contactNumber, email, address, paymentTerms, status) {
    document.getElementById('updateAdjustID').value = custumerID;
    document.getElementById('updateCustumerName').value = custumerName;
    document.getElementById('updateContactPerson').value = contactPerson;
    document.getElementById('updateContactNumber').value = contactNumber;
    document.getElementById('updateEmail').value = email;
    document.getElementById('updateAddress').value = address;
    document.getElementById('updatePaymentTerms').value = paymentTerms;
    document.getElementById('updateStatus').value = status;
    document.getElementById('updateModal').classList.remove('hidden');
}
function openArchiveModal(custumerID) {
    document.getElementById('archiveAdjustID').value = custumerID;
    document.getElementById('archiveModal').classList.remove('hidden');
}
function closeModal(modalId) {
    document.getElementById(modalId).classList.add('hidden');
}
function outsideClick(event, modalId) {
    if (event.target.id === modalId) {
        closeModal(modalId);
    }
}
</script>